---
title: 配置电子邮件端点
seo-title: 配置电子邮件端点
description: 了解如何配置电子邮件端点。
seo-description: 了解如何配置电子邮件端点。
uuid: d47bb45b-0e0e-43ca-9e25-e347d0e60206
contentOwner: admin
content-type: reference
geptopics: SG_AEMFORMS/categories/managing_endpoints
products: SG_EXPERIENCEMANAGER/6.5/FORMS
discoiquuid: dcf15c42-9ec6-4d1c-ad41-083aa0b8c7ae
exl-id: 33583a12-4f20-4146-baa4-c9854e454bbf
source-git-commit: b220adf6fa3e9faf94389b9a9416b7fca2f89d9d
workflow-type: tm+mt
source-wordcount: '3766'
ht-degree: 0%

---

# 配置电子邮件端点{#configuring-email-endpoints}

电子邮件端点允许用户通过向指定的电子邮件帐户发送一个或多个文档（作为电子邮件附件）来调用服务。 电子邮件收件箱用作附件的收集点。 该服务监控收件箱并处理附件。 转换结果将转发给端点中定义的用户。

对于电子邮件端点，授权用户可以通过向相应帐户发送电子邮件来调用进程。 结果将返回给提交用户（默认情况下）或端点设置中定义的用户。

在配置电子邮件端点之前，请创建一个POP3或IMAP电子邮件帐户，以供端点使用。 为每种转化类型设置单独的帐户。 例如，一个帐户可配置为从传入文件附件生成标准PDF文档，另一个帐户可配置为生成安全PDF文档。

>[!NOTE]
>
>每个电子邮件地址必须只映射到一个电子邮件端点。 即使禁用了其他电子邮件端点，您也无法将多个电子邮件端点配置为单个电子邮件地址。

所有电子邮件端点都使用电子邮件收件箱的授权用户名和密码进行配置，调用服务时需要使用这些用户名和密码。 电子邮件帐户受其配置的邮件服务器系统的保护。

如果用户在文件和转换路径名称中发送包含西欧语言字符的文档，则他们必须使用支持所需编码类型（Latin1 [ISO-8859-1]、西欧[Windows]或UTF-8）的电子邮件应用程序。 有关更多信息，请参阅&#x200B;*安装和部署AEM Forms*&#x200B;文档以了解应用程序服务器。

在配置电子邮件端点之前，请配置电子邮件服务。 （请参阅[配置默认电子邮件端点设置](configuring-email-endpoints.md#configure-default-email-endpoint-settings)。） 电子邮件服务的配置参数有两个用途：

* 配置所有电子邮件端点通用的属性
* 为所有电子邮件端点提供默认值

## 为电子邮件端点{#configure-ssl-for-an-email-endpoint}配置SSL

您可以将POP3、IMAP或SMTP配置为对电子邮件端点使用安全套接字层(SSL)。

1. 在电子邮件服务器上，根据制造商的文档为POP3、IMAP或SMTP启用SSL。
1. 从电子邮件服务器导出客户端证书。
1. 使用keytool程序将客户端证书文件导入应用程序服务器的Java虚拟机(JVM)证书存储区。 此步骤的过程取决于JVM和客户端安装路径。

   例如，如果您使用默认OracleWebLogic Server安装，并在Microsoft Windows Server® 2003上使用JDK 1.5.0，请在命令提示符下键入以下文本：

   `keytool -import -file client_certificate -alias myalias -keystore BEA_HOME\jdk150_04\jre\security\cacerts`

1. 出现提示时，输入密码（对于Java，默认密码为`changeit`）。 您将收到一条消息，指明证书已成功导入。
1. 使用管理控制台将电子邮件端点添加到服务。
1. 在管理控制台中创建电子邮件端点。 配置端点设置时，为传入消息选择POP3/IMAP SSL已启用，为传出消息选择SMTP SSL已启用，并相应地更改端口属性。

>[!NOTE]
>
>提示：如果您在使用SSL时遇到问题，请使用电子邮件客户端（如Microsoft Outlook）检查它是否可以使用SSL访问电子邮件服务器。 如果电子邮件客户端无法访问电子邮件服务器，则此问题与证书或电子邮件服务器的配置有关。

## 配置默认电子邮件端点设置{#configure-default-email-endpoint-settings}

您可以使用“服务管理”页面配置所有电子邮件端点通用的属性，并为所有电子邮件端点提供默认值。

要使表单工作流接收和处理来自用户的传入电子邮件，您需要为完成任务服务创建电子邮件端点。 此电子邮件端点需要其他设置，如[为完成任务服务](configuring-email-endpoints.md#create-an-email-endpoint-for-the-complete-task-service)创建电子邮件端点中所述。

### 更改电子邮件端点的默认值{#change-the-default-values-for-email-endpoints}

1. 在管理控制台中，单击服务>应用程序和服务>服务管理。
1. 在“服务管理”页面上，单击电子邮件：1.0（组件ID是com.adobe.idp.dsc.provider.service.email.Email）。
1. 在“配置”选项卡中，指定默认的电子邮件端点设置，然后单击“保存”。

### 默认电子邮件端点设置{#default-email-endpoint-settings}

**Cron表达式：** 石英用来计划输入目录轮询的cron表达式。

**重复间隔：** 重复目录轮询的次数。如果未在端点配置中指定此值，则默认重复间隔为秒。 默认值为 10。此值不能小于10。

**重复计数：** 轮询输入目录的次数。如果端点配置中未指定此值，则使用的默认重复计数。 值为–1表示对目录的无限扫描。 默认值为–1。

**作业开始时的延迟：** 作业开始扫描端点之前的延迟的默认值（以秒为单位）。默认值为 0。

**批量大小：** 接收者每次扫描处理的电子邮件数量，旨在获得最佳性能。值–1表示所有电子邮件。 默认值为 2。

**异步：** 将调用类型标识为异步或同步。瞬态和同步进程只能同步调用。 默认值为异步。

**域模式：** 用于筛选传入电子邮件的域名模式。例如，如果使用adobe.com，则只会处理来自adobe.com的电子邮件；将忽略来自其他域的电子邮件。

**文件模式：** 提供程序接受的传入文件附件模式。这包括具有特定扩展名(&amp;ast;.dat、&amp;ast;.xml)、特定名称（数据）以及名称和扩展名(.[dD][aA]&#39;port&#39;)。默认值为&amp;ast;。&amp;ast;。

**成功作业的收件人：** 一个或多个电子邮件地址，用于发送电子邮件以指示成功作业。默认情况下，成功的作业消息始终会发送给初始作业的发件人。 最多支持100个收件人。 要关闭此设置，请将此字段留空。

**失败作业的收件人：** 一个或多个电子邮件地址，用于发送电子邮件以指示失败作业。默认情况下，失败的作业消息始终会发送给发送初始作业的发送者。 最多支持100个收件人。 要关闭此设置，请将此字段留空。

**收件箱主机：** 要扫描的电子邮件提供程序的收件箱主机名或IP地址。

**收件箱端口：** 电子邮件提供商要扫描的收件箱端口号。如果值为0，则使用默认的IMAP或POP3端口。

**收件箱协议：** 用于扫描收件箱的电子邮件端点的电子邮件协议。选项为IMAP或POP3。 收件箱主机邮件服务器必须支持这些协议。

**收件箱超时：** 指定在尝试连接到收件箱时，端点在取消之前将等待的时间。如果在到达超时值之前未获取连接，则不会轮询收件箱。

**收件箱用户：** 登录到电子邮件帐户所需的用户名。根据电子邮件服务器和配置的不同，此名称可能只是电子邮件的用户名部分，也可能是完整的电子邮件地址。

**收件箱密码：** 收件箱用户的密码。

**POP3/IMAP SSL已启用：** 选中此选项后，将启用SSL。

**SMTP主机：** 电子邮件提供程序用来发送结果和错误消息的邮件服务器的主机名。例如， mail.corp.example.com。

**SMTP端口：** 用于连接到邮件服务器的端口。默认值为 25。

**SMTP用户：** 电子邮件提供程序在发送电子邮件以获取结果和错误时要使用的用户帐户。

**SMTP密码：** SMTP帐户的密码。某些邮件服务器不需要SMTP密码。

**发送来源：** 用于发送结果和错误的电子邮件通知的电子邮件地址(例如user@company.com)。如果未指定“发送来源”值，则电子邮件服务器会尝试通过将“SMTP用户”设置中指定的值与电子邮件服务器上配置的默认域组合在一起，来确定电子邮件地址。 如果您的电子邮件服务器没有默认域，并且您没有为“发送方”指定值，则可能会发生错误。 要确保电子邮件的发件人地址正确，请为“发送自”设置指定一个值。

**启用SMTP SSL:** 选中此选项后，将通过SMTP启用SSL。

**将原始电子邮件正文作为附件包含在内：** 默认情况下，当您向表单服务器发送电子邮件时，消息的原始文本将包含在消息正文中。要将文本作为附件包含在内，请选择此选项。

**对结果电子邮件使用原始主题行：** 默认情况下，Forms服务器在发送结果电子邮件时，会将“成功电子邮件主题”和“错误电子邮件主题”设置中指定的值用作主题行。要改为使用与发送到服务器的原始电子邮件相同的主题行，请选择此选项。

**成功电子邮件主题：** 在向电子邮件端点发送电子邮件以开始或继续某个流程后，您会从AEM Forms服务器收到一封回复电子邮件。如果电子邮件成功，您会收到一封成功的电子邮件。 如果电子邮件失败，您将收到一封失败的电子邮件，告知其失败原因。 此设置允许您指定为此端点发送的成功电子邮件的主题行。

**成功电子邮件正文：** 用于指定为此端点发送的成功电子邮件正文文本。

**错误电子邮件主题前缀：** 用于指定在为此端点发送的失败电子邮件主题行开头使用的文本。

**错误电子邮件主题：** 允许您指定为此端点发送的失败电子邮件主题行。此文本显示在错误电子邮件主题前缀之后。

**错误电子邮件正文：** 允许您指定为此端点发送的失败电子邮件正文文本中的第一行。

**电子邮件摘要信息：** 每条成功或失败消息都包含一个部分，其中包含您发送到表单服务器的原始电子邮件文本。此设置指定显示在该部分上方的文本。

**在创建/更新此端点之前验证收件箱：** 如果选中此选项，Forms服务器会在创建端点之前检查您的SMTP/POP3设置是否正确。单击添加后，会显示一条消息，说明收件箱帐户是否有效。 如果未选择此选项，则AEM Forms服务器将创建端点，而无需验证收件箱。

**字符集编码：** 用于电子邮件的编码格式。默认为UTF-8，大多数日本以外的用户都将使用UTF-8。 日语环境中的用户可以选择ISO2022-JP。

**失败的电子邮件发送文件夹：** 指定在SMTP邮件服务器无法运行时要在其中存储结果的目录。

## 电子邮件端点设置{#email-endpoint-settings}

使用以下设置配置电子邮件端点。

**名称：** 标识端点的必需设置。不要包含&lt;字符，因为它会截断工作区中显示的名称。 如果输入URL作为端点的名称，请确保它符合RFC1738中指定的语法规则。

**描述：** 端点的描述。不要包含&lt;字符，因为它会截断工作区中显示的描述。

**Cron表达式：** 如果必须使用cron表达式计划电子邮件，请输入cron表达式。

**重复计数：** 电子邮件端点扫描文件夹或目录的次数。值为–1表示无限扫描。 默认值为–1。

**重复间隔：** 接收器用于检查传入邮件的扫描速率。

**作业启动时的延迟：** 计划程序启动后等待扫描的时间。

**批量大小：** 接收者每次扫描处理的电子邮件数量，旨在获得最佳性能。值–1表示所有电子邮件。 默认值为 2。

**用户名：** 必需的设置，从电子邮件调用目标服务时使用的用户名。默认值为SuperAdmin。

**域名：** 必需的设置，即用户的域。默认值为DefaultDom。

**域模式：** 指定提供商接受的传入电子邮件的域模式。例如，如果使用adobe.com，则只会处理adobe.com的电子邮件；将忽略来自其他域的电子邮件。

**文件模式：** 指定提供程序接受的传入文件附件模式。这包括具有特定扩展名(&amp;ast;.dat、&amp;ast;.xml)、特定名称（数据）或名称和扩展名(&amp;ast;)中的复合表达式的文件。[dD][aA]&#39;port&#39;)。

**成功作业的收件人：** 发送消息以指示成功作业的电子邮件地址。默认情况下，成功的作业消息始终会发送给发件人。 如果键入sender，则会向发件人发送电子邮件结果。 最多支持100个收件人。 使用电子邮件地址指定其他收件人，并用逗号分隔(,)。

要关闭此设置，请将设置留空。 在某些情况下，您希望触发某个流程，而不希望收到结果的电子邮件通知。

**失败作业的收件人：** 发送消息以指示失败作业的电子邮件地址。默认情况下，失败的作业消息始终会发送给发件人。 如果键入sender，则会向发件人发送电子邮件结果。 最多支持100个收件人。 使用电子邮件地址指定其他收件人，并用逗号分隔(,)。

要关闭此设置，请将设置留空。 在某些情况下，您希望触发某个流程，而不希望收到结果的电子邮件通知。

**收件箱主机：** 要扫描的电子邮件提供程序的收件箱主机名或IP地址。

**收件箱端口：** 电子邮件服务器使用的端口。POP3的默认值为110,IMAP的默认值为143。 如果启用了SSL，则POP3的默认值为995,IMAP的默认值为993。

**收件箱协议：** 用于扫描收件箱的电子邮件端点的电子邮件协议。值为IMAP或POP3。 收件箱主机邮件服务器必须支持这些协议。

**收件箱超时：** 电子邮件提供商等待收件箱响应的超时（以秒为单位）。

**收件箱用户：** 登录到电子邮件帐户所需的用户名。根据电子邮件服务器和配置的不同，此值可能只是电子邮件的用户名部分，也可能是完整的电子邮件地址。

**收件箱密码：** 收件箱用户的密码。

**POP3/IMAP SSL已启用：** 选择此设置可强制电子邮件提供程序使用SSL扫描收件箱。确保邮件服务器支持SSL。

**SMTP主机：** 电子邮件提供程序用来发送结果和错误消息的邮件服务器的主机名。

**SMTP端口：** SMTP端口的默认值为25。

**SMTP用户：** 电子邮件提供程序在发送结果和错误的电子邮件通知时使用的用户帐户。

**SMTP密码：** SMTP帐户的密码。某些邮件服务器不需要SMTP密码。

**发送来源：** 用于发送结果和错误的电子邮件通知的电子邮件地址(例如user@company.com)。如果未指定“发送来源”值，则电子邮件服务器会尝试通过将“SMTP用户”设置中指定的值与电子邮件服务器上配置的默认域组合在一起，来确定电子邮件地址。 如果您的电子邮件服务器没有默认域，并且您没有为“发送方”指定值，则可能会发生错误。 要确保电子邮件的发件人地址正确，请为“发送自”设置指定一个值。

**启用SMTP SSL:** 选择此选项可强制电子邮件提供程序使用SSL扫描收件箱。确保邮件服务器支持SSL。

**失败的电子邮件发送文件夹：** 指定在SMTP邮件服务器无法运行时要在其中存储结果的目录。

**异步：** 当设置为同步时，将处理所有输入文档并返回一个响应。设置为异步时，将为处理的每个文档发送响应。

例如，为采用单个Word文档并将该文档作为PDF文件返回的服务创建电子邮件端点。 可以向端点的收件箱发送一封电子邮件，其中包含多个(3)Word文档。 在处理所有三个文档时，如果端点配置为同步，则会发送一封包含所有三个文档的单个响应电子邮件。 如果端点是异步的，则在将每个Word文档转换为PDF后，会发送一封响应电子邮件。 结果会生成三封电子邮件，每封都带有一个PDF附件。

默认值为异步。

**将原始电子邮件正文作为附件包含在内：** 默认情况下，当您向表单服务器发送电子邮件时，消息的原始文本会包含在消息正文中。要将文本作为附件包含在内，请选择此选项。

**对结果电子邮件使用原始主题行：** 默认情况下，Forms Server在发送结果电子邮件时，会将“成功电子邮件主题”和“错误电子邮件主题”设置中指定的值用作主题行。要改为使用与发送到服务器的原始电子邮件相同的主题行，请选择此选项。

**成功电子邮件主题：** 在向电子邮件端点发送电子邮件以开始或继续某个流程后，您会从AEM Forms服务器收到一封回复电子邮件。如果电子邮件成功，您会收到一封成功的电子邮件。 如果电子邮件失败，您将收到一封失败的电子邮件，告知其失败原因。 此设置允许您指定为此端点发送的成功电子邮件的主题行。

**成功电子邮件正文：** 用于指定为此端点发送的成功电子邮件正文文本。

**错误电子邮件主题前缀：** 用于指定在为此端点发送的失败电子邮件主题行开头使用的文本。

**错误电子邮件主题：** 允许您指定为此端点发送的失败电子邮件主题行。此文本显示在错误电子邮件主题前缀之后。

**错误电子邮件正文：** 允许您指定为此端点发送的失败电子邮件正文文本中的第一行。

**电子邮件摘要信息：** 每条成功或失败消息都包含一个部分，其中包含您发送到表单服务器的原始电子邮件文本。此设置指定显示在该部分上方的文本。

**在创建/更新此端点之前验证收件箱：** 如果选择此选项，Forms服务器会在创建端点之前检查您的SMTP/POP3设置是否正确。单击添加后，会显示一条消息，说明收件箱帐户是否有效。 如果未选择此选项，则AEM Forms服务器将创建端点，而无需验证收件箱。

**操作名称：** 此设置是必选项。可分配给电子邮件端点的操作列表。 您在此处选择的操作可确定在“输入参数映射”和“输出参数映射”部分中显示哪些字段。

**输入参数映射：** 用于配置处理服务和操作所需的输入。两种类型的输入为文字和变量：

**文字：** 电子邮件使用在显示时在字段中输入的值。

**变量：** 您可以从电子邮件主题、正文、标题或发件人电子邮件地址映射字符串。为此，请使用以下关键词之一：%SUBJECT%、%BODY%、%HEADER%或%SENDER%。 例如，如果您使用%SUBJECT%，则电子邮件主题内容将用作输入参数。 要选取附件，请输入电子邮件端点可用于选择附加文档的文件模式。 例如，输入&amp;ast;.pdf会选择任何扩展名为.pdf的附加文档。 进入&amp;ast;选择任何附加的文档。 输入example.pdf将选择任何名为example.pdf的附加文档。

**输出参数映射：** 用于配置服务和操作的输出。输出参数映射值中的以下字符在附件文件名中展开：

**%** FR显示源文件的文件名（不包括扩展名）。

**%** ER显示源文件的扩展名。

反斜线(\)的任何存在值都将被替换为%%。

***注意&#x200B;**:如果服务请求消息包含多个文件附件，则不能将%F和%E参数用于终结点的Output Parameter Mappints属性。如果服务响应返回多个文件附件，则无法为多个附件指定相同的文件名。 如果您没有遵循这些建议，则被调用的服务将为返回的文件创建名称，并且这些名称不可预测。*

以下值可用：

**单个对象：** 电子邮件提供程序没有源文件夹目标；结果将作为附件返回。该模式为Result/%F.ps，并返回Result%%sourcefilename.ps作为文件名附件。

**列表：** 模式为Result/%F/，并返回Result%%sourcefilename%%file1作为文件名附件。

**映射：** 模式为Result/%F/，源目标为Result%%sourcefilename%%file1和Result%%sourcefilename%%file2。如果映射包含多个对象且模式为Result/%F.ps，则响应文件附件为Result%%sourcefilename1.ps(output 1)和Result%%sourcefilename2.ps(output 2)。

## 为完成任务服务{#create-an-email-endpoint-for-the-complete-task-service}创建电子邮件端点

要使表单工作流接收和处理来自用户的传入电子邮件，您需要为完成任务服务创建电子邮件端点。

1. 在管理控制台中，单击服务>应用程序和服务>服务管理。
1. 在“服务管理”页面上，单击完成任务服务。
1. 在端点选项卡上，从下拉列表中选择电子邮件，然后单击添加。
1. 在“收件箱主机”框中，键入邮件服务器的主机名或IP地址。
1. 在收件箱用户框中，键入登录到您为处理表单提交而创建的电子邮件帐户所需的用户名。 根据电子邮件服务器和配置的不同，此名称可能只是电子邮件的用户名部分，也可能是完整的电子邮件地址。
1. 在“收件箱密码”框中，键入收件箱用户的密码。
1. 在“SMTP主机”框中，键入电子邮件提供程序从中发送结果和错误消息的邮件服务器的主机名或IP地址。
1. 在“SMTP用户”框中，键入电子邮件提供程序在发送电子邮件以获取结果和错误时要使用的用户帐户。 此用户帐户可以与“收件箱用户”使用的值相同。
1. 在“SMTP密码”框中，键入SMTP帐户的密码。
1. 在操作名称列表中，选择调用。
1. 在attachmentMap列表中，选择“变量”，然后在相邻框中键入`*.*`。 这会将来自集客邮件的所有附件发送到完成任务流程的映射变量。
1. 在mailBody列表中，选择变量并在相邻框中键入`%BODY%`。
1. 在mailFrom列表中，选择“变量”，然后在相邻框中键入`%SENDER%`。 这会将发件人地址映射到“完成任务”流程数据。
1. 在结果框中，键入`results`。 这会导致完成任务或启动进程返回结果字符串。
1. 单击添加。
