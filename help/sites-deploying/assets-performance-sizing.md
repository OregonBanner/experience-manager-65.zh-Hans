---
title: Assets性能指南
description: 了解如何为新的数字资产管理(DAM)设置确定最佳硬件大小以及如何排查性能问题
contentOwner: User
products: SG_EXPERIENCEMANAGER/6.5/SITES
content-type: reference
topic-tags: configuring
exl-id: fbe15e1b-830b-4752-bd02-0d239a90bc68
source-git-commit: b66ec42c35b5b60804015d340b8194bbd6ef3e28
workflow-type: tm+mt
source-wordcount: '1215'
ht-degree: 0%

---

# Assets性能指南{#assets-performance-guide}

在性能很重要的情况下，通常使用数字资产管理(DAM)。 但是，典型的DAM设置包含多个可能会影响性能的硬件和软件组件。 本文档提供了以下内容：

* 供系统管理员使用的有关确定新数字资产管理设置的最佳硬件大小的信息
* 面向希望对DAM实例进行性能问题故障排除的软件开发人员的信息

## 性能问题 {#performance-issues}

数字资产管理中性能不佳会在三个方面影响用户体验：交互性能、资产处理和下载速度。 为了提高性能，必须正确测量观察到的性能和建立目标量度。

**1. 交互式搜索和浏览** 用户搜索资产或浏览DAM Finder，抱怨响应缓慢或搜索结果未立即显示。 这是一个交互式性能问题。

交互性能以页面响应时间来衡量。 这是从接收HTTP请求到关闭HTTP响应所花费的时间，可以从请求日志文件确定该时间。 典型的目标性能是页面响应时间少于两秒。

**2. 资产处理** 资源处理问题是，当用户上传资源时，需要几分钟才能将资源轻松转换并摄取到Adobe Experience Manager (AEM) DAM中。

资产处理性能的测量依据是平均工作流处理完成时间。 从调用资产更新工作流流程到完成该流程所用的时间，可以从工作流报表用户界面中确定。 典型的Target性能取决于处理的资源大小和类型以及演绎版的数量。 目标性能的示例可能如下所示：

* 对于使用标准呈现版本时小于1280x1280像素的图像，时间不超过10秒
* 对于使用标准演绎版小于100 MB的图像，时间不到一分钟
* 小于5分钟的高清视频剪辑小于1分钟

**3. 下载速度** 从AEM DAM下载时存在吞吐量问题，在浏览DAM管理员或DAM查找器时，下载时间较长，并且不会立即显示缩略图。

吞吐量性能是以每秒千位下载速率来衡量的。 对于100个并发下载，典型的目标性能为300 Kbps。

**4. 影响资产处理性能的因素**

要能够估计处理资产所需的硬件，应该考虑以下方面：

* 以像素数表示的图像分辨率
* 分配给AEM进程的栈

图像中包含的像素数决定了处理时间，像素越多则处理时间越长。
图像类型、压缩率或图像存储到的文件的相关大小不会显着影响整体性能。

栈已被确定为最重要的限制因素。 每当资产超过可用的可用内存时，处理性能就会迅速下降。

DAM流程非常适合于大量并行执行。 批量上传资产和多核处理器可加快每个资产的绝对逗留时间。

**5. 估计执行资产处理的硬件需求**

广泛处理数字资产需要优化的硬件资源，最相关的因素是图像大小和已处理图像的峰值吞吐量。

分配至少16 GB的栈并配置 [!UICONTROL DAM更新资产] 使用的工作流 [Camera Raw包](/help/assets/camera-raw.md) 用于摄取原始图像。

## 了解系统 {#understanding-the-system}

典型的DAM设置包括最终用户通过负载平衡器访问DAM。 DAM实例可能是群集设置的一部分，其中每个DAM实例在物理计算机或虚拟机上的Java™虚拟机进程中运行。 DAM存储要么由RAID磁盘提供（如果存在单机设置），要么由托管网络连接存储提供（如果存在群集设置）。

以下图例描述了某些解决方案可能存在的性能隐患区域（如果适用）。

**与最终用户的网络连接** 网络连接速度慢会导致吞吐量问题，并且在某些极少数情况下还会导致延迟问题。 有时，用户与ISP的连接速度较慢，尤其是在企业内部网中。 这是网络拓扑不正确的征兆。

**临时文件系统** 本地文件系统速度较慢可能会导致交互式性能问题，特别是在搜索时，因为搜索索引存储在本地磁盘上。 如果使用命令行进程，则还可能导致资产处理问题。

**AEM DAM Finder** 由于同一实例上同时存在多个用户或其他占用大量CPU的进程，导致高CPU利用率，因此搜索过程中经常出现交互式性能问题。 从虚拟机转移到专用计算机，并确保计算机上没有其他服务可以运行，这有助于提高性能。 如果高CPU负载是由于资产处理和许多并发用户导致的，则Day建议添加其他群集节点。

**AEM DAM工作流** 资产摄取期间长时间运行的工作流进程会导致资产处理性能问题。 根据正在处理的资源类型，这可能表示CPU过度使用。 Day建议您减少系统上运行的其他进程数量，并通过添加群集节点来增加可用CPU的数量。

**NAS连接** 与NAS网络连接较差会导致交互性能问题，因为在资产处理期间访问新节点的速度会因网络延迟而减慢。 此外，由于加载和保存演绎版的速度减慢，因此网络吞吐量缓慢不仅会对吞吐量产生不利影响，还会对资产处理性能产生不利影响。

NAS中延迟和吞吐量较差的原因在于网络拓扑或其他服务对NAS的过度使用。

**网络连接存储** 过度使用的网络连接存储系统可能会导致一系列问题：

* 磁盘空间不足是经常遇到的问题，可以通过适当调整DAM项目的大小来避免这些问题。
* 磁盘延迟过高会导致CRX访问速度变慢，并可能导致交互性能问题。
* 低磁盘吞吐量可能会导致CQ5 DAM的性能降低。

## 性能测试 {#testing-for-performance}

对于每个DAM项目，请务必建立能够快速识别和解决瓶颈的性能测试制度。 为此，请考虑以下检查点：

1. 使用JMeter的端到端性能测试 — 模拟示例搜索和浏览会话以检测交互性能问题。
1. 使用JMeter进行吞吐量和延迟测试 — 在客户端计算机上运行可确保不存在与拓扑相关的问题。
1. 标准化资产处理测试 — 摄取几个示例资产并测量时间。 这应包括外部工作流集成。
1. 监视每个群集节点的CPU、磁盘和内存利用率。
1. CRX读/写性能诊断，用于识别与处理无关的问题。
1. 监视从DAM群集到NAS的网络延迟和吞吐量。
1. 如果可能，直接在NAS上测试、读取和写入性能和磁盘延迟。

## 调整瓶颈 {#tweaking-bottlenecks}

到目前为止，已在项目中使用了以下性能调整：

* 选择性生成演绎版：仅通过向资源处理工作流添加条件来生成所需的演绎版，因此仅为选定资源生成成本更高的演绎版。
* 实例之间共享的数据存储：当磁盘空间不足时，这可能会显着减少所需的磁盘空间量，但代价是配置工作增加并失去数据存储的自动清理。

## 深入阅读 {#further-reading}

* [分析慢速进程和阻塞进程](https://helpx.adobe.com/experience-manager/kb/AnalyzeSlowAndBlockedProcesses.html)
